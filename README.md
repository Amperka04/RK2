#RK_2

##(–ö—Ä–∞—Ç–∫–∏–π –æ—Ç—á–µ—Ç)

**–°—Ç—É–¥–µ–Ω—Ç–∞ –≥—Ä—É–ø–ø—ã –ò–£8-21, –ë–∞—Ä—à –ò–≤–∞–Ω**

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Ä–∫2: https://github.com/Amperka04/RK2.git

**–ó–∞–¥–∞–Ω–∏–µ—ã –∫ —Ä–∫**
1. –î–æ–±–∏—Ç—å—Å—è, –µ—Å–ª–∏ –≤–¥—Ä—É–≥ —ç—Ç–æ –Ω–µ —Ç–∞–∫, —á—Ç–æ–±—ã –¥–∞–Ω–Ω—ã–π –∫–æ–¥ —Å–æ–±–∏—Ä–∞–ª—Å—è –ª–æ–∫–∞–ª—å–Ω–æ.
2. –≤—ã–Ω–µ—Å—Ç–∏ –≤—Å–µ –∫–ª–∞—Å—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ —à–∞–±–ª–æ–Ω–µ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª –∏–ª–∏ —Ñ–∞–π–ª—ã, —á—Ç–æ–±—ã –æ–Ω–∏ –º–æ–≥–ª–∏ –±—ã—Ç—å –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã.
3. –°–¥–µ–ª–∞—Ç—å —Å–±–æ—Ä–æ—á–Ω—ã–π —Ñ–∞–π–ª CMakeLists.txt, –∫–æ—Ç–æ—Ä–æ–π —Å–¥–µ–ª–∞–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É —Å –∫–ª–∞—Å—Å–∞–º–∏ —à–∞–±–ª–æ–Ω–∞, –∞ —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª, –∫–∞–∫ –æ–Ω –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –≤ –∫–æ–¥–µ.
4. –ù–∞–ø–∏—Å–∞—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ç–µ—Å—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞.
5. –î–æ–±–∞–≤–∏—Ç—å —ç—Ç–æ—Ç —Ç–µ—Å—Ç –≤ —Å–±–æ—Ä–æ—á–Ω—ã–π —Ñ–∞–π–ª CMakeLists.txt, —á—Ç–æ–±—ã —Ç–µ—Å—Ç —Ç–∞–∫–∂–µ —Å–æ–±–∏—Ä–∞–ª—Å—è.
6. –ù–∞–ø–∏—Å–∞—Ç—å —Å–∫—Ä–∏–ø—Ç github action, —á—Ç–æ–±—ã –≤–µ—Å—å –∫–æ–¥ –∏ —Ç–µ—Å—Ç—ã —Å–æ–±–∏—Ä–∞–ª–∏—Å—å —É–¥–∞–ª–µ–Ω–Ω–æ –Ω–∞ github. –¢–∞–∫–∂–µ —Å–æ–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –Ω—É–∂–Ω–æ –≤ –ø–∞–∫–µ—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤ deb –Ω–∞ ubuntu-latest.
7. –°–æ–±—Ä–∞–Ω–Ω—ã–π –ø–∞–∫–µ—Ç –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –≤ –≤–∏–¥–µ Release –∫ –ø—Ä–æ–µ–∫—Ç—É.



**–ù–∞—á–∞–ª–æ**
1. –°–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏ –Ω—É–∂–Ω—ã–π —Ñ–∞–π–ª–∏–∫ *webpage_button.cpp* –ø–æ –∑–∞–¥–∞–Ω–∏—é –ø–æ —Å—Å—ã–ª–∫–µ ![–°—Å—ã–ª–∫–∞](https://github.com/taeguk/GoF-Design-Patterns/tree/master/Behavioral/Command)

2. –û—Ç–≤—è–∑–∞–ª–∏ (–Ω–∞ –≤—Å—è–∫–∏–π) –∏ –ø—Ä–∏–≤—è–∑–∞–ª–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–Ω–æ–≤–∞. –î–æ–±–∞–≤–∏–ª–∏ —Ñ–∞–π–ª, –∑–∞–∫–æ–º–º–∏—Ç–∏–ª–∏ –∏ –∑–∞–ø—É—à–∏–ª–∏.
```sh
git add webpage_button.cpp
git commit -m "first commit"
git push origin master
```

3. –í –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ RK2/ –ø–æ–¥–∫–ª—é—á–∏–ª–∏ –≥—É–≥–ª—ã
```sh
mkdir third-party
git submodule add https://github.com/google/googletest third-party/gtest
git add third-party/gtest
git commit -m"added gtest framework"
```

4. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Ä–∞–∑–±–∏–ª–∏ –Ω–∞—á–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª –Ω–∞ —Ñ–∞–π–ª–∏–∫–∏ —Å –∫–ª–∞—Å—Å–∞–º–∏, –∞ —Ç–∞–∫–∂–µ –ø—Ä–æ–ø–∏—Å–∞–ª–∏ CMakLists.txt, –∏ —Ç–µ—Å—Ç—ã (—Å–º –ø–∞–ø–∫–∏ **include, src, tests** –∏ –∏—Ö —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏)

5. –°–æ–±—Ä–∞–ª–∏ makefile –≤ –Ω–æ–≤–æ—Å–æ–∑–¥–∞–Ω–Ω–æ–π –æ—Ç–¥–µ–ª—å–Ω–æ–π –ø–∞–ø–∫–µ /RK2/build
```sh
mkdir build && cd build
cmake ..
```
–í—ã–≤–æ–¥ –ø–æ—Å–ª–µ –∫–æ–º–∞–Ω–¥—ã:
```
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/cc - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/c++ - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Performing Test CMAKE_HAVE_LIBC_PTHREAD
-- Performing Test CMAKE_HAVE_LIBC_PTHREAD - Success
-- Found Threads: TRUE  
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /home/bivan/Amperka04/workspace/projects/RK2/build
```

6. –°–æ–±—Ä–∞–ª–∏ –ø—Ä–æ–µ–∫—Ç –∫–æ–º–∞–Ω–¥–æ–π *make* –∏ –ø–æ–ª—É—á–∏–ª–∏ —Å–ª–µ–¥—É—é—â–∏–π –≤—ã–≤–æ–¥:
```
[  5%] Building CXX object CMakeFiles/Patterns.dir/src/WebPageManager.cpp.o
[ 10%] Building CXX object CMakeFiles/Patterns.dir/src/ChangeWebPageCommand.cpp.o
[ 15%] Building CXX object CMakeFiles/Patterns.dir/src/Button.cpp.o
[ 21%] Linking CXX static library libPatterns.a
[ 21%] Built target Patterns
[ 26%] Building CXX object CMakeFiles/main_exe.dir/src/main.cpp.o
[ 31%] Linking CXX executable main_exe
[ 31%] Built target main_exe
[ 36%] Building CXX object third-party/gtest/googletest/CMakeFiles/gtest.dir/src/gtest-all.cc.o
[ 42%] Linking CXX static library ../../../lib/libgtest.a
[ 42%] Built target gtest
[ 47%] Building CXX object third-party/gtest/googletest/CMakeFiles/gtest_main.dir/src/gtest_main.cc.o
[ 52%] Linking CXX static library ../../../lib/libgtest_main.a
[ 52%] Built target gtest_main
[ 57%] Building CXX object third-party/gtest/googlemock/CMakeFiles/gmock.dir/src/gmock-all.cc.o
[ 63%] Linking CXX static library ../../../lib/libgmock.a
[ 63%] Built target gmock
[ 68%] Building CXX object CMakeFiles/tests.dir/tests/WebPageManagerTest.cpp.o
[ 73%] Building CXX object CMakeFiles/tests.dir/tests/ChangeWebPageCommandTest.cpp.o
[ 78%] Building CXX object CMakeFiles/tests.dir/tests/GenericCommandTest.cpp.o
[ 84%] Building CXX object CMakeFiles/tests.dir/tests/ButtonTest.cpp.o
[ 89%] Linking CXX executable tests
[ 89%] Built target tests
[ 94%] Building CXX object third-party/gtest/googlemock/CMakeFiles/gmock_main.dir/src/gmock_main.cc.o
[100%] Linking CXX static library ../../../lib/libgmock_main.a
[100%] Built target gmock_main
```
—É—Ä–∞ –ø–æ–±–µ–¥–∞

7. –í—Å–µ –≤ —Ç–æ–π –∂–µ build –∑–∞–ø—É—Å—Ç–∏–ª–∏ –ø–æ—è–≤–∏–≤—à–∏–µ—Å—è —Ñ–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

```sh ./main_exe ```

–í—ã–≤–æ–¥:
```
Change web page to http://taeguk.me.
This is generic command.
```


```sh ./tests ```

–í—ã–≤–æ–¥:
```
Running main() from /home/bivan/Amperka04/workspace/projects/RK2/third-party/gtest/googletest/src/gtest_main.cc
[==========] Running 5 tests from 4 test suites.
[----------] Global test environment set-up.
[----------] 1 test from WebPageManagerTest
[ RUN      ] WebPageManagerTest.ChangeWebPage
[       OK ] WebPageManagerTest.ChangeWebPage (0 ms)
[----------] 1 test from WebPageManagerTest (0 ms total)

[----------] 1 test from ChangeWebPageCommandTest
[ RUN      ] ChangeWebPageCommandTest.Execute
[       OK ] ChangeWebPageCommandTest.Execute (0 ms)
[----------] 1 test from ChangeWebPageCommandTest (0 ms total)

[----------] 1 test from GenericCommandTest
[ RUN      ] GenericCommandTest.Execute
[       OK ] GenericCommandTest.Execute (0 ms)
[----------] 1 test from GenericCommandTest (0 ms total)

[----------] 2 tests from ButtonTest
[ RUN      ] ButtonTest.Click
[       OK ] ButtonTest.Click (0 ms)
[ RUN      ] ButtonTest.ChangeCommand
[       OK ] ButtonTest.ChangeCommand (0 ms)
[----------] 2 tests from ButtonTest (0 ms total)

[----------] Global test environment tear-down
[==========] 5 tests from 4 test suites ran. (0 ms total)
[  PASSED  ] 5 tests.
```
—É—Ä–∞ –ø–æ–±–µ–¥–∞2 

8. –î–∞–ª–µ–µ –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π –∑–∞–∫–æ–º–º–∏—Ç–∏–º –ø—Ä–æ–¥–µ–ª–∞–Ω–Ω—É—é —Ä–∞–±–æ—Ç—É –ø–µ—Ä–µ–¥ –ø—É–Ω–∫—Ç–∞–º–∏ 6-7
```sh
git add .
git commit -m "Completed steps 1-5: code refactoring, CMake, tests"
```

9. –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ GitHub Actions. –°–æ–∑–¥–∞–ª–∏ –ø–∞–ø–∫—É –∏ .yml —Ñ–∞–π–ª —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º
```sh
mkdir -p .github/workflows
nano .github/workflows/ci.yml
```

```
name: CI

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
  build_and_test:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3
      with:
        submodules: 'recursive'  

    - name: Install dependencies
      run: |
        sudo apt-get update
        sudo apt-get install -y build-essential cmake

    - name: Create build directory
      run: mkdir build

    - name: Configure CMake
      working-directory: ./build
      run: cmake ..

    - name: Build project
      working-directory: ./build
      run: cmake --build . --config Release

    - name: Run tests
      working-directory: ./build
      run: ./tests

```

10. –î–æ–±–∞–≤–∏–ª–∏ workflow –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```sh
git add .github/workflows/ci.yml
git commit -m "Add GitHub Actions CI workflow"
git push origin master
```

11. –ü—Ä–æ–≤–µ—Ä–∏–ª–∏ Actions
(–≥–∞–ª–æ—á–∫–∞)

12. –î–∞–ª–µ–µ DEB-–ø–∞–∫–µ—Ç. –í –∫–æ–Ω–µ—Ü CMakeLists.txt –¥–æ–ø–∏—à–µ–º 
```
set(CPACK_GENERATOR "DEB")
set(CPACK_PACKAGE_NAME "rk2-patterns")
set(CPACK_PACKAGE_VERSION "1.0.0")
set(CPACK_PACKAGE_CONTACT "Your Name <your.email@example.com>")
set(CPACK_PACKAGE_DESCRIPTION "Command Pattern Implementation")
set(CPACK_DEBIAN_PACKAGE_MAINTAINER "Your Name")
set(CPACK_DEBIAN_PACKAGE_DEPENDS "libc6 (>= 2.14)")
include(CPack)
```

13. –°–æ–∑–¥–∞–ª–∏ –Ω–æ–≤—ã–π —Ñ–∞–π–ª–∏–∫ –¥–ª—è —Ä–µ–ª–∏–∑–æ–≤ (—Å–º –∫–æ–¥ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏)
```sh
nano .github/workflows/release.yml
```

14. –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–Ω–∏—è
```sh
git add .github/workflows/release.yml CMakeLists.txt
git commit -m "Add release workflow and DEB packaging"
git push origin master 
```

15. –î–æ–±–∞–≤–∏–ª–∏ —Ç–µ–≥ –¥–ª—è —Ä–µ–ª–∏–∑–∞
```sh
git tag -a v1.0.0 -m "First release"
git push origin v1.0.0
```

16. –£—Ä–∞ –ø–æ–±–µ–¥–∞! –¢–µ–ø–µ—Ä—å –µ—Å—Ç—å —Ç–µ–≥–∏ –≤ —Ä–µ–ª–∏–∑–∞—Ö –∏ –º–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å –∞—Ä—Ö–∏–≤—ã .zip –∏ .tar.gz –∞ —Ç–∞–∫–∂–µ —Å–∞–º DEB-–ø–∞–∫–µ—Ç
(—Å–ø—Ä–∞–≤–∞ –≤ —Ä–∞–∑–¥–µ–ª–µ Releases –µ—Å—Ç—å —Ç–µ–≥–∏. –ù–∞–∂–∞–≤, –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ —Ä–µ–ª–∏–∑—ã –ø—Ä–æ–µ–∫—Ç–∞)



**–ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞, —è —Å–≤–æ–±–æ–¥–µ–Ω!**

ü¶ä
